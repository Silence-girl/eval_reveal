<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>SOOPT测评体验版</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/evaluation.css" />
		<script type="text/javascript">
			(function (doc, win) {
			    var docEl = doc.documentElement,
			            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
			            recalc = function () {
			                var clientWidth = docEl.clientWidth;
			                if (!clientWidth) return;
			                if(clientWidth>750){
			                	clientWidth = 750;
			                }
			                docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
			            };
			    // Abort if browser does not support addEventListener
			    if (!doc.addEventListener) return;
			    win.addEventListener(resizeEvt, recalc, false);
			    doc.addEventListener('DOMContentLoaded', recalc, false);
			})(document, window); 
		</script>
	</head>

	<body>
		<div class="flipbook-viewport">
			<div class="flipbook">
				<div>
					<div class="container test-explain container-active">
						<a class="btn-test"><img src="images/start.png" /></a>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">1</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择与粗体字意义最相近的单词</span>
						</div>
						<div class="ques-stems"><span style="color: #fff; font-weight: bold;">choose：</span>Which one will you choose？</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">take</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">close</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">finish</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">prepare</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">2</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择正确的单词填入空白处</span>
						</div>
						<div class="ques-stems">In 2016, _______ June 1st, the King will be 60 years old.</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">in</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">on</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">at</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">to</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">3</span><span class="number-tolal">/9.</span>
							<span class="question-expl">匹配图片与单词</span>
						</div>
						<div class="ques-img"><img src="images/shutterstock_70099480.jpg" alt=""></div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">red</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">pink</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">brown</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">purple</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">4</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择与粗体字意义最相近的单词</span>
						</div>
						<div class="ques-stems"><span style="color: #fff; font-weight: bold;">vague: </span>I have a  vague idea about that.</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">detailed</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">exciting</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">good</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">unclear</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">5</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择正确的单词填入空白处</span>
						</div>
						<div class="ques-stems">The teachers at the college _______ three main concerns.</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">has</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">have</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">having</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">to have</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">6</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择正确的单词填入空白处</span>
						</div>
						<div class="ques-stems">My father told me that _____ mother was a very good singer.</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">them</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">his</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">her</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">there</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">7</span><span class="number-tolal">/9.</span>
							<span class="question-expl">匹配图片与单词</span>
						</div>
						<div class="ques-img"><img src="images/shutterstock_391777792.jpg" alt=""></div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">handbag</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">purse</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">wallet</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">bag</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">8</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择正确的单词填入空白处</span>
						</div>
						<div class="ques-stems">Last year, she _____ the top prize for sports in my school.</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">won</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">win</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">wins</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">have won</span></p>
						</div>
						<button class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container que-bg">
						<div class="question-num" data-id="6937f8e5-afd1-4e41-9424-a54b8d94fac1">
							<span class="number-curren">9</span><span class="number-tolal">/9.</span>
							<span class="question-expl">选择正确的单词填入空白处</span>
						</div>
						<div class="ques-stems">The bank is opposite the supermarket and _____ the hotel.</div>
						<div class="option">
							<p class="option-text"><span class="option-ques option-A"></span><span class="option-digit">next to</span></p>
							<p class="option-text"><span class="option-ques option-B"></span><span class="option-digit">next</span></p>
							<p class="option-text"><span class="option-ques option-C"></span><span class="option-digit">across</span></p>
							<p class="option-text"><span class="option-ques option-D"></span><span class="option-digit">for</span></p>
						</div>
						<button id="submit" class="btn-next"><img src="images/next_default.png"/></button>
					</div>
				</div>
				<div>
					<div class="container test-results">
						<h4 class="test-level"></h4>
						<img class="test-line" src="images/stop_line.png" />
						<a class="btn-down" href="http://a.app.qq.com/o/simple.jsp?pkgname=com.staroutlook"></a>
					</div>
				</div>
			</div>
		</div>
		<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src='http://res.wx.qq.com/open/js/jweixin-1.0.0.js'></script>
		<script type="text/javascript" src="js/modernizr.2.5.3.min.js"></script>
		<script>
			var descContent = "";
			$(".btn-test").bind("touchstart", function() {
				$(".flipbook").turn("disable", false);

			});

			$(".btn-test").bind("touchend", function() {
				$(".flipbook").turn('page', 2);
				$(".flipbook").turn("disable", true);
			});

			//判断手机类型
			var answers = [1, 2, 4, 4, 2, 2, 3, 1, 1];
			var testAnswer = [];
			window.onload = function() {
				if(navigator.userAgent.indexOf('iPhone') > -1) {
					//屏蔽ios下上下弹性
					$(window).on('scroll.elasticity', function(e) {
						e.preventDefault();
					}).on('touchmove.elasticity', function(e) {
						e.preventDefault();
					});
				}
				loading();
			}
			//加载页面
			function loading() {
				function loadApp() {
					var w = $(window).width();
					var h = $(window).height();
					$('.flipboox').width(w).height(h);
					$(window).resize(function() {
						w = $(window).width();
						h = $(window).height();
						$('.flipboox').width(w).height(h);
					});

					$('.flipbook').turn({
						width: w,
						height: h,
						elevation: 50,
						display: 'single',
						duration: 1000,
						gradients: true,
						autoCenter: true,
						acceleration: false,
						when: {
							turning: function(e, page, view) {
								var activeContainer;
								$.each($(".page-wrapper"), function(index, ele) {
									if($(ele).attr("page") == page) {
										activeContainer = $(ele);
									}
								});
								activeContainer.find(".option-text").click(function() {
									$(this).addClass("selected").siblings().removeClass("selected").parent().next().children().attr("src", "images/next_pressed.png");
									$(".flipbook").turn("disable", false);
								});

								if(activeContainer.find('.ques-img').length) {
									$('.btn-next').css('margin-top', '.7rem');
								} else {
									$('.btn-next').css('margin-top', '1.82rem');
								}

								

								activeContainer.find(".btn-next").bind("touchend", function() {
									testAnswer.push(activeContainer.find(".selected").index() + 1);
									$(".flipbook").turn('page', page + 1);
								});
								activeContainer.find("#submit").bind("touchend",function() {
									var level = -1;
									var levels = ["Newbie", "Beginner", "Apprentice", "Novice", "Primary", "Senior", "Competent", "Proficient", "Expert"];
									$.each(testAnswer, function(index, ele) {
										ele == answers[index] && level++;
									});
									$(".test-level").text(levels[level]);
									descContent = "level：" + levels[level];
									if(level == -1) {
										$(".test-level").text("Newbie");
										descContent = "level：Newbie";
									}
									bindShare();
								});
							},
							turned: function(e, page, view) {
								$(".flipbook").turn("disable", true);
							}
						}
					});
					$(".flipbook").turn("disable", true);
				}
				yepnope({
					test: Modernizr.csstransforms,
					yep: ['js/turn.js'],
					complete: loadApp
				});
			}
			
			$.ajax({
				url : 'http://test.api.staroutlook.com:8080/star/wechat/getJSSDKConfig?configUrl=' + encodeURIComponent(window.location.href.split('#')[0]),
				dataType : 'jsonp',
				jsonp : "jsonpCallback",
				success : function(msg) {
					wx.config({
						debug : false,
						appId : msg.appId,
						timestamp : msg.timestamp,
						nonceStr : msg.nonceStr,
						signature : msg.signature,
						jsApiList : [ "onMenuShareTimeline",
								"onMenuShareAppMessage",
								"onMenuShareQQ", "onMenuShareWeibo" ]
					});
				}
			});
			
			
			
			wx.ready(function(){
				bindShare();
			});
		
			function bindShare(){
				wx.onMenuShareTimeline({
				    title: 'SOOPT测评体验版', // 分享标题
				    imgUrl: 'http://www.staroutlook.com/evaluation/images/share_test_300_300.png',	//分享图片
				    success: function () { 
				        // 用户确认分享后执行的回调函数
				    },
				    cancel: function () { 
				        // 用户取消分享后执行的回调函数
				    }
				});
				
				wx.onMenuShareAppMessage({
				    title: 'SOOPT测评体验版', // 分享标题
				    imgUrl: 'http://www.staroutlook.com/evaluation/images/share_test_300_300.png',      //分享图片
				    desc: descContent, // 分享描述
				    success: function () { 
				        // 用户确认分享后执行的回调函数
				    },
				    cancel: function () { 
				        // 用户取消分享后执行的回调函数
				    }
				});
				
				wx.onMenuShareQQ({
				    title: 'SOOPT测评体验版', // 分享标题
				    imgUrl: 'http://www.staroutlook.com/evaluation/images/share_test_300_300.png',      //分享图片
				    desc: descContent, // 分享描述
				    success: function () { 
				       // 用户确认分享后执行的回调函数
				    },
				    cancel: function () { 
				       // 用户取消分享后执行的回调函数
				    }
				});
				
				wx.onMenuShareQZone({
				    title: 'SOOPT测评体验版', // 分享标题
				    imgUrl: 'http://www.staroutlook.com/evaluation/images/share_test_300_300.png',      //分享图片
				    desc: descContent, // 分享描述
				    success: function () { 
				       // 用户确认分享后执行的回调函数
				    },
				    cancel: function () { 
				        // 用户取消分享后执行的回调函数
				    }
				});
				
				
			}
		</script>
	</body>

</html>